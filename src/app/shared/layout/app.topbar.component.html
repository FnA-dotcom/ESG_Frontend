<div class="layout-topbar">
    <div class="layout-topbar-left">
        <a class="app-name">
            <img alt="main logo" style="width: 120px;height:50px" [src]="'assets/layout/images/logo-topbar.png'" class="app-logo">
            <!-- <span>RoverMD</span> -->
        </a>

        <a href="#" class="menu-button" (click)="appMain.onMenuButtonClick($event)">
            <div class="menu-button-icon"></div>
        </a>

        <!-- <ul class="layout-topbar-main-menu">
            <li>
                <a [routerLink]="['/']" [routerLinkActiveOptions]="{exact: true}"
                   routerLinkActive="topbar-active-menuitem-routerlink">Sales
                    <span class="active-bottom"></span>
                </a>
            </li>
            <li>
                <a [routerLink]="['/analytics']" routerLinkActive="topbar-active-menuitem-routerlink">Analytics
                    <span class="active-bottom"></span>
                </a>
            </li>
            <li>
                <a [routerLink]="['/utilities/widgets']" routerLinkActive="topbar-active-menuitem-routerlink">Widgets
                    <span class="active-bottom"></span>
                </a>
            </li>
            <li app-topmenu *ngFor="let item of menu; let i = index;" [item]="item" [index]="i" [root]="true" class="layout-topbar-menu" (click)="appMain.onTopbarMenuClick($event)"></li>
        </ul> -->
    </div>
    <div class="layout-topbar-right">
        <ul class="layout-topbar-actions">
            <!-- <li #searchItem class="search-item" [ngClass]="{'active-topmenuitem': appMain.search}">
                <a href="#" tabindex="0" (click)="appMain.onTopbarItemClick($event,searchItem); searchFocus($event)">
                    <i class="pi pi-search"></i>
                </a>

                <div class="search-input-wrapper">
                    <span class="p-input-icon-right">
                        <input #input1 type="text" pInputText placeholder="Type your keywords" (click)="appMain.searchClick = true;" autofocus/>
                        <i class="pi pi-search"></i>
                    </span>
                </div>

                <ul class="fadeInDown">
                    <div class="search-input-wrapper p-fluid" style="width: 100%">
                        <span class="p-input-icon-right">
                            <input #input2 type="text" pInputText placeholder="Type your keywords" (click)="appMain.searchClick = true;" autofocus/>
                            <i class="pi pi-search"></i>
                        </span>
                    </div>
                </ul>
            </li> -->
            <!-- (click)="menu.toggle($event)" -->
            <li #profile class="profile-item" [ngClass]="{'active-topmenuitem fadeInDown': appMain.activeTopbarItem === profile}">
                <div class="profile-container" (click)="appMain.onTopbarItemClick($event,profile)" >
                    <!-- <a href="#">{{currentName}}</a> -->
                    <div class="name-container">
                        <!-- <span class="name">{{ userData.userName }}</span> -->
                        <span class="name">Fawad Sarwar</span>
                        <!-- <span class="job">{{ userData.userType }}</span> -->
                        <span class="job">Administrator</span>
                    </div>
                    <i class="pi pi-angle-down"></i>
                </div>

                <!-- <p-menu appendTo="body" #menu [popup]="true" [model]="profileMenuItems"></p-menu> -->

                <!-- *ngIf="showSwitchCutomersOption" -->
                <ul class="profile-menu fadeInDown">
                    <li >
                        <!-- <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                            <span>Switch Customers</span>
                        </a> -->
                        <!-- <a (click)="showHideDialog()">
                            <span>Switch Customers</span>
                        </a> -->
                    </li>
                    <li>
                        <a (click)="changePassword()">
                            <span>Change Password</span>
                        </a>
                    </li>
                    <!-- <li>
                        <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                            <span>Settings</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                            <span>Messages</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" (click)="appMain.onTopbarSubItemClick($event)">
                            <span>Notifications</span>
                        </a>
                    </li> -->
                    <li>
                        <a (click)="logout()">
                            <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</div>


<p-dialog (onHide)="hideChangePassword()" [(visible)]="showChangePassword" [style]="{width: '40vw'}" header="Change Password"  [modal]="true">
			
	<ng-template pTemplate="content">
		<form [formGroup]="changePasswordForm">
		<div class="formgrid grid mt-4">
			<div class="field col">
				<span class="p-float-label">
					<input
						formControlName="clientName"
						id="clientName"
						type="text"
						class="p-inputtext-sm ng-dirty"
						pInputText
					/>
					<label for="clientName">Client Name</label>
				</span>
			</div>
			<div class="field col">
				<span class="p-float-label">
					<input
						formControlName="userName"
						id="userName"
						type="text"
						class="p-inputtext-sm ng-dirty"
						pInputText
					/>
					<label for="userName">User Name</label>
				</span>
			</div>                   
		</div>
		<div class="formgrid grid mt-3">
			<div class="field col">
				<span class="p-float-label">
					<input
						formControlName="currentPassword"
						id="currentPassword"
						[type]="showPassword?'text':'password'"
						class="p-inputtext-sm ng-dirty"
						pInputText
                       
					/>
					<label for="currentPassword">Current Password</label>
				</span>
                <small *ngIf="changePasswordForm.controls['currentPassword'].invalid && changePasswordForm.controls['currentPassword'].touched" class="p-error">current password is required*</small>
			</div>
			<div class="field col">
				<span class="p-float-label">
					<input
						formControlName="newPassword"
						id="newPassword"
						[type]="showPassword?'text':'password'"
						class="p-inputtext-sm ng-dirty"
						pInputText
                     (change)="passwordValidation()"
					/>
					<label for="newPassword">New Password</label>
				</span>
                <small *ngIf="changePasswordForm.controls['newPassword'].invalid && changePasswordForm.controls['newPassword'].touched" class="p-error">new password is required*</small>
			</div>                   
		</div>
		<div class="formgrid grid mt-3">
			<div class="field col">
				<span class="p-float-label">
					<input
						formControlName="confirmNewPassword"
						id="confirmNewPassword"
						[type]="showPassword?'text':'password'"
						class="p-inputtext-sm ng-dirty"
						pInputText
                        (change)="confirmPassword()"
                        onpaste="return false"
                        
					/>
					<label for="confirmNewPassword">Confirm Password</label>
				</span>
                <small *ngIf="changePasswordForm.controls['confirmNewPassword'].invalid && changePasswordForm.controls['confirmNewPassword'].touched" class="p-error">confirm password is required*</small>
			</div>                
		</div>
	</form>
    <div class="field-checkbox">
        <p-checkbox [(ngModel)]="showPassword" [binary]="true" inputId="binary"></p-checkbox>
        <label for="binary">Show Password</label>
    </div>
    <small class="p-error">
        Password Policy: <br>
        Password Must be 8 Character Long <br>
        Password Must Contain Atleast One Special Character <br>
        Password Must Contain Atleast One Numeric Digit <br>
        Password Must Contain Atleast One Upper Case and One Lower Case Letter <br>
    </small>
	</ng-template>
	
	<ng-template pTemplate="footer">
		<button pButton pRipple label="Cancel" class="p-button-danger p-button-sm mb-2" (click)="hideChangePassword()"></button>
		<button pButton pRipple label="Change Password" icon="pi pi-check" class="p-button-success p-button-sm mr-2 mb-2" (click)="createUserConfirmation()" [disabled]="changePasswordForm.invalid" ></button>
	</ng-template>
</p-dialog>


<p-dialog [(visible)]="showSwitchCutomers" position="top" [style]="{width: '50vw', height: 'auto'}" header="Select Facility"  [modal]="false" styleClass="p-fluid" [draggable]="false" [resizable]="false">
    <ng-template pTemplate="content">
       
        <form [formGroup]="switchFacilityForm" (ngSubmit)="onSwithCustomerSubmit()">
            <div class="grid mt-3">
                <div class="col-12 md:col-3 pr-2">
                   
    
                   
                    <p-dropdown appendTo="body" inputId="dropdown" [autoDisplayFirst]="true" [options]="customerType" (onChange)="selectedCustomerType($event)"
                     optionLabel=""></p-dropdown>
      
                </div>
    
                <div class="col-12 md:col-7 px-2">
                    <div class="field">
                        <div class="field">
                           
                            <p-dropdown appendTo="body" [options]="facilities1" formControlName="facility" optionLabel="facilityName" [filter]="true" filterBy="facilityName" [showClear]="true" placeholder="Select Facility">
                                <ng-template pTemplate="selectedItem">
                                    <div class="icd-item icd-item-value" *ngIf="switchFacilityForm.controls['facility'].value.facilityName">
                                        <div>{{switchFacilityForm.controls['facility'].value.facilityName}}</div>
                                    </div>
                                </ng-template>
                                <ng-template let-facility pTemplate="item">
                                    <div class="icd-item">
                                        <div><strong>{{facility.facilityName}}</strong></div>
                                        
                                        
                                        
                                    </div>
                                </ng-template>
                                
                            </p-dropdown>
                           
                            <!-- <small *ngIf="submitted && fc.facility.errors" id="firstName-help" class="p-error">
                                <span *ngIf="fc.facility.errors.required">Field is Requireds</span>
                             </small> -->
                        </div>
                       
                    </div>
    
                  
                </div>
                <div class="col-12 md:col-2 pl-2">
                    <button pButton pRipple type="submit" label="Select" class="p-button-raised p-button-success"></button>
                </div>
            </div>
           
               
                
               
               
            </form>
    
            <p-table [value]="recentFacilities" styleClass="p-datatable-sm p-datatable-gridlines">
                <ng-template pTemplate="caption">
                  Recently Accessed
                </ng-template>
                <ng-template pTemplate="header">
                  <tr>
                    <th>Name</th>
                    <th>Status</th>
                    <th>Date Opened</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-product>
                  <tr (click)="onSelectFacility(product)" class="row">
                    <td>{{product.name}}</td>
                    <td>{{product.status}}</td>
                    <td>{{product.date}}</td>
                  </tr>
                </ng-template>
              </p-table>
          
    </ng-template>

    <ng-template pTemplate="footer" class="d-flex justify-content-between">
    <!--    <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="showHideDialog()"></button>
         <div class="field-checkbox ">
            <p-checkbox name="newTab" value="isNewTab" [(ngModel)]="selectedValues" inputId="val2"></p-checkbox>
            <label for="val2" >Open in new tab</label>
        </div> -->
        <!-- <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="saveProduct()"></button> -->
    </ng-template>

</p-dialog>


<p-dialog [modal]="true" [closable]="false" [(visible)]="displayLoader" [modal]="true" [style]="{width:'35vw',textAlign:'Center',background:'transparent'}">
    <p-progressSpinner [style]="{width: '50px', height: '50px'}" styleClass="custom-spinner" strokeWidth="8" fill="var(--surface-ground)" animationDuration=".5s"></p-progressSpinner>
    <p>Changing Facility...</p>
</p-dialog>